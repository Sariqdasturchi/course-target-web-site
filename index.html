<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Meta Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '1060219358944446');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=1060219358944446&ev=PageView&noscript=1" /></noscript>
    <!-- End Meta Pixel Code -->
    <!-- CSS -->
    <link rel="stylesheet" href="./style/style.css">
    <!-- AOS js CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Font awesome cdn -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <!-- Bootstrap CSS  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Kursga Yoziling</title>
</head>

<body>

    <section>
        <header>
            <nav>
                <div class="logo">
                    <a href="/">
                        <img src="./imgs/logo texnopark.png" alt="">
                    </a>
                </div>
                <div class="header-text">

                </div>
                <div class="menu-btn-cont">
                    <a href="#map">Manzil</a>
                    <a href="tel:998889345505">
                        <i class="fa-solid fa-phone"></i>
                    </a>

                </div>
            </nav>
        </header>
        <div class="container" id="batafsil">
            <div class="cont-txt">
                <h1> <i class="fa-solid fa-meteor" style="color: #ffffff;"></i>Interior dizayn kursi</h1>
            </div>
            <div class="course-title" data-aos="fade-right" id="batafsil">
                <p data-aos="flip-up">Kurs haqida to'liq ma'lumot</p>
                <ul>
                    <li data-aos="flip-up">Davomiyligi 7 oy<br> +bonus amaliyot uchun yana 1 oy
                    </li>
                    <li data-aos="flip-down">3DMAX dasturida ishlashni to'liq o'rganasiz</li>
                    <li data-aos="flip-up">Autocad dasturida ishlashni to'liq o'rganasiz</li>
                    <li data-aos="flip-down">Interior dizayn sohasi haqida to'liq ma'lumotga ega bo'lasiz</li>
                    <li data-aos="flip-up">Dizayn bilan ishlashni o'rganasiz</li>
                    <li data-aos="flip-down">Loyihani olib, topshirguncha bo'lgan jarayonni to'liq o'rganasiz</li>
                    <li data-aos="flip-up">Kurs narxi atigi <strong>450,000</strong> so'm oyiga</li>
                    <li>Darslar Samarqand shahrida offline <br> bo'lib o'tadi</li>
                </ul>
            </div>
            <div class="course-form" data-aos="fade-up" id="form">
                <form action="https://sheetdb.io/api/v1/xr3kiwaxrg9ig" method="post" id="sheetdb-form">
                    <div>
                        <label for="Ism">Ism va Familya</label>
                        <input type="text" name="Ism"  id="lastName" required autocomplete="off">
                    </div>
                    <div>
                        <label for="Telraqam">Telefon raqam</label>
                        <input type="text" name="Telraqam" id="phone" oninput="phoneMask(event)" placeholder="+998 (__) ___-__-__" required autocomplete="off">
                    </div>
                    <div>
                        <button type="submit">Joy band qilish</button>
                    </div>
                    <div class="success-message">
                        <span class="success">Ma'lumotlaringiz yuborildi, Siz bilan tez orada bog'lanamiz</span>
                        <span class="danger">Ma'lumotlarni to'liq kiriting !</span>
                    </div>
                </form>
            </div>
            <div class="map" data-aos="fade-up" id="map">
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3072.236263561918!2d66.95950973884071!3d39.64439704740557!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3f4d19ca891429b5%3A0xd67bdbef8e48a3a2!2sSamarqand%20Yoshlar%20Texnoparki!5e0!3m2!1sru!2s!4v1726521835270!5m2!1sru!2s"
                    width="370" height="280" style="border:0;" allowfullscreen="" loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
        <footer>
            <div class="footer-logo">
                <a href="/">
                    <img src="./imgs/logo texnopark 1.png" alt="">
                    <span>Samarqand Yoshlar Texnoparki</span>
                </a>
            </div>
            <div class="footer-message">
                <a href="https://www.instagram.com/samytp.uz?igsh=aGJ4N2dvdTVmMWIy"><i
                        class="fa-brands fa-instagram"></i></a>
                <a href="https://www.facebook.com/samytpuz1?mibextid=ZbWKwL"><i class="fa-brands fa-facebook"></i></a>
                <a href="https://t.me/samytpuz"><i class="fa-brands fa-telegram"></i></a>
            </div>
            <div class="footer-course-about">
                <a href="#batafsil">Kusr haqida to'liq ma'lumot</a>
                <a href="#batafsil">Kursga yozilish</a>
            </div>
            <div class="footer-phone">
                <a href="tel:+998889345505">+998 88 934 55 05</a>
                <p>
                    Universitet xiyoboni Tarix fakulteti <br>
                    Samarqand O'zbekiston
                </p>
            </div>
        </footer>
    </section>
    <section class="notFound">
        <h1>Faqat telefon uchun!</h1>
    </section>
    <!-- Mask JS -->
    <script>
        // Telefon raqamini masklash funksiyasi
        function phoneMask(event) {
            const input = event.target;
            let value = input.value.replace(/\D/g, ''); // Barcha raqam bo'lmagan belgilarni olib tashlash
            if (value.length > 12) value = value.substring(0, 12); // Maksimal 12 ta raqamni cheklash (998999999999)

            // Telefon raqamiga "+998 (99) 999-99-99" formatini qo'llash
            let formattedValue = '+998 (';
            if (value.length > 3) formattedValue += value.substring(3, 5) + ') ';
            if (value.length > 5) formattedValue += value.substring(5, 8) + '-';
            if (value.length > 8) formattedValue += value.substring(8, 10) + '-';
            if (value.length > 10) formattedValue += value.substring(10, 12);

            input.value = formattedValue;
        }

        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById('sheetdb-form');
            const success = document.querySelector('.success');
            const danger = document.querySelector('.danger');
            const fullName = document.getElementById('lastName');
            const phone = document.getElementById('phone');

            form.addEventListener('submit', (e) => {
                e.preventDefault(); // Formani avtomatik jo'natilishini oldini olish

                // Telefon raqamini tozalash
                const sanitizedPhone = phone.value.replace(/\D/g, ''); // Faqat raqamlarni olish
                const currentTime = new Date();
                const timeFormatted = `${currentTime.getDate()}.${currentTime.getMonth() + 1} - ${currentTime.getHours()}:${currentTime.getMinutes()}`;

                // console.log('Yuborilayotgan ma\'lumotlar:', { 
                //     Ism: fullName.value, 
                //     Telraqam: sanitizedPhone,
                //     'Tel qilingan vaq': timeFormatted,
                //     'Javob': '',
                //     'Ertaga aloqaga chiqaman - 2': '',
                //     'O\'ylab ko\'radi (qayta aloqaga chiqaman) - 3': '',
                //     'Kursga yozildi to\'lov qiladi (to\'lov qiladigan vaqti aloqaga chiqaman) - 4': '',
                //     'To\'lov qildi': ''
                // }); // Yuborilayotgan ma'lumotlarni konsolda ko'rsatish

                // Formani tekshirish
                if (!fullName.value || !sanitizedPhone || sanitizedPhone.length !== 12) {
                    danger.style.display = 'block';
                    success.style.display = 'none';
                    setTimeout(() => {
                        danger.style.display = 'none';
                    }, 4000);
                } else {
                    // JSON formatida ma'lumotlarni yuborish
                    const data = {
                        Ism: fullName.value,
                        Telraqam: sanitizedPhone,
                        'Tel qilingan vaq': timeFormatted,
                        'Javob': '',
                        'Ertaga aloqaga chiqaman - 2': '',
                        'O\'ylab ko\'radi (qayta aloqaga chiqaman) - 3': '',
                        'Kursga yozildi to\'lov qiladi (to\'lov qiladigan vaqti aloqaga chiqaman) - 4': '',
                        'To\'lov qildi': ''
                    };

                    fetch(form.action, {
                        method: "POST",
                        headers: {
                            'Content-Type': 'application/json', // JSON formatini ko'rsatish
                        },
                        body: JSON.stringify(data), // Ma'lumotlarni JSON formatida yuborish
                    })
                    .then(res => {
                        // console.log('Javob:', res); // Serverdan qaytgan javobni konsolda ko'rsatish
                        return res.json();
                    })
                    .then((req) => {
                        // console.log('Serverdan kelgan ma\'lumot:', req); // Serverdan kelgan ma'lumot
                        success.style.display = 'block';
                        danger.style.display = 'none';
                        setTimeout(() => {
                            success.style.display = 'none';
                        }, 6000);
                        form.reset(); // Formani tozalash
                    })
                    .catch(err => {
                        // console.error('Xatolik:', err); // Xatolikni konsolda ko'rsatish
                        danger.style.display = 'block';
                        success.style.display = 'none';
                        setTimeout(() => {
                            danger.style.display = 'none';
                        }, 4000);
                    });
                }
            });
        });
    </script>
    <!-- AOS js -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <!-- JavaScript -->
    <!-- <script src="./js/main.js"></script> -->
</body>

</html>